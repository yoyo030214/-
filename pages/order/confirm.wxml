<view class="container">
  <!-- 收货地址 -->
  <view class="address-section" bindtap="onSelectAddress">
    <block wx:if="{{address}}">
      <view class="address-info">
        <view class="contact">
          <text class="name">{{address.name}}</text>
          <text class="phone">{{address.phone}}</text>
        </view>
        <view class="address">{{address.province}}{{address.city}}{{address.district}}{{address.detail}}</view>
      </view>
    </block>
    <block wx:else>
      <view class="no-address">
        <text>请选择收货地址</text>
        <image src="/images/arrow-right.png" mode="aspectFit"></image>
      </view>
    </block>
  </view>

  <!-- 商品列表 -->
  <view class="product-section">
    <view class="product-item" wx:for="{{products}}" wx:key="id">
      <image class="product-image" src="{{item.image}}" mode="aspectFill"></image>
      <view class="product-info">
        <view class="product-name">{{item.name}}</view>
        <view class="product-spec">{{item.spec}}</view>
        <view class="product-price">
          <text class="price">¥{{item.price}}</text>
          <text class="quantity">x{{item.quantity}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- 订单备注 -->
  <view class="remark-section">
    <text class="label">订单备注</text>
    <input 
      class="remark-input" 
      placeholder="请输入订单备注（选填）" 
      value="{{remark}}"
      bindinput="onRemarkInput"
    />
  </view>

  <!-- 支付方式 -->
  <view class="payment-section">
    <text class="label">支付方式</text>
    <view class="payment-methods">
      <view 
        class="payment-method {{paymentMethod === 'wxpay' ? 'active' : ''}}" 
        bindtap="onPaymentMethodChange" 
        data-method="wxpay"
      >
        <image src="/images/wxpay.png" mode="aspectFit"></image>
        <text>微信支付</text>
        <image class="check" src="{{paymentMethod === 'wxpay' ? '/images/selected.png' : '/images/unselected.png'}}" mode="aspectFit"></image>
      </view>
      <view 
        class="payment-method {{paymentMethod === 'alipay' ? 'active' : ''}}" 
        bindtap="onPaymentMethodChange" 
        data-method="alipay"
      >
        <image src="/images/alipay.png" mode="aspectFit"></image>
        <text>支付宝</text>
        <image class="check" src="{{paymentMethod === 'alipay' ? '/images/selected.png' : '/images/unselected.png'}}" mode="aspectFit"></image>
      </view>
    </view>
  </view>

  <!-- 价格信息 -->
  <view class="price-section">
    <view class="price-item">
      <text class="label">商品总额</text>
      <text class="value">¥{{totalAmount}}</text>
    </view>
    <view class="price-item">
      <text class="label">运费</text>
      <text class="value">¥{{freightAmount}}</text>
    </view>
    <view class="price-item">
      <text class="label">优惠金额</text>
      <text class="value">-¥{{discountAmount}}</text>
    </view>
    <view class="price-item total">
      <text class="label">实付金额</text>
      <text class="value">¥{{actualAmount}}</text>
    </view>
  </view>

  <!-- 底部提交栏 -->
  <view class="footer">
    <view class="total-info">
      <text>实付：</text>
      <text class="total-price">¥{{actualAmount}}</text>
    </view>
    <button 
      class="btn-submit {{!address ? 'disabled' : ''}}" 
      bindtap="onSubmitOrder"
      disabled="{{!address || loading}}"
    >
      {{loading ? '提交中...' : '提交订单'}}
    </button>
  </view>
</view> 