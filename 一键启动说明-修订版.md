# 农业应用商家管理后台 - 一键启动指南（修订版）

本文档介绍如何使用一键启动脚本来快速启动农业应用的商家管理后台服务。

## 前提条件

1. 已安装 Docker Desktop（Windows/Mac）或 Docker（Linux）
2. 确保 Docker 服务已启动
3. 确保网络连接正常（能访问Docker Hub或国内镜像源）

## 快速启动选项

根据您的情况，可以选择以下任一方式启动服务：

### 方法一：修复版启动脚本（推荐）

该脚本针对网络问题和编码问题进行了优化：

1. 双击项目根目录中的 `start-service-fixed.bat` 文件
2. 脚本会自动检查网络状况，并使用更简化的配置启动服务

### 方法二：配置国内镜像源后启动

如果您的网络无法直接连接Docker Hub：

1. 双击项目根目录中的 `配置Docker镜像源.bat` 文件
2. 选择一个国内镜像源（推荐阿里云或网易云）
3. 重启Docker Desktop
4. 然后运行 `start-service-fixed.bat` 启动服务

### 方法三：不使用Docker直接启动（备选方案）

如果Docker方案持续失败，您可以尝试直接使用Node.js启动：

1. 确保您的电脑上已安装Node.js（推荐v14或更高版本）
2. 确保您的电脑上已安装MySQL数据库（5.7或更高版本）
3. 双击项目根目录中的 `start-without-docker.bat` 文件
4. 按照提示完成配置和启动

### 方法四：使用调试工具解决问题

如果您遇到启动问题需要诊断：

1. 双击项目根目录中的 `debug-service.bat` 文件
2. 从菜单中选择相应选项进行问题诊断和解决
3. 可以查看日志、清理缓存、尝试备用方案等

## 常见问题解决

### 网络问题导致无法下载Docker镜像

1. 使用 `配置Docker镜像源.bat` 配置国内镜像源
2. 确保您的计算机已连接到互联网
3. 如果使用了代理，请确保Docker也配置了相同的代理设置

### 提示"无法连接到Docker守护进程"

1. 确保Docker Desktop已启动
2. 重启Docker Desktop
3. 重启计算机后再试

### 启动后无法访问网页界面

1. 确保端口5000没有被其他应用占用
2. 使用 `debug-service.bat` 查看服务日志，了解具体错误
3. 检查防火墙设置，确保允许端口5000的访问

### Node.js依赖安装失败

1. 使用 `start-without-docker.bat` 启动时配置了npm淘宝镜像
2. 如果仍然失败，请尝试手动运行 `npm install --registry=https://registry.npmmirror.com`

## 其他信息

### 服务访问地址

成功启动后，服务将在以下地址可用：

- 商家管理后台地址：http://localhost:5000/admin
- 数据库地址：localhost:3307（Docker方式）或localhost:3306（直接方式）
- 数据库名：agricultural_app

### 停止服务

1. Docker方式：运行 `stop-service.bat` 或使用 `debug-service.bat` 中的选项
2. 直接方式：在命令行窗口中按 Ctrl+C 停止服务

### 数据库信息

- 用户名：root
- 密码：lol110606YY
- 数据库名：agricultural_app 